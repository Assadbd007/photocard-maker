
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶æ‡¶≤‡ßÅ ‡¶´‡¶ü‡ßã‡¶ï‡¶æ‡¶∞‡ßç‡¶°</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.maateen.me/noto-serif-bengali/font.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Serif Bengali', serif;
            width: 1180px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
        }

        .upload-section {
            margin-bottom: 30px;
            text-align: center;
        }

        .file-input-wrapper {
            position: relative;
            display: inline-block;
            cursor: pointer;
            background: #007bff;
            color: white;
            padding: 12px 24px;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .file-input-wrapper:hover {
            background: #0056b3;
        }

        .file-input-wrapper input[type=file] {
            position: absolute;
            left: -9999px;
        }

        .image-preview {
            width: 960px;
            height: 575px;
            border: 3px solid #fdfdfd;
            border-radius: 10px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 18px;
            transition: all 0.3s ease;
            position: absolute;
            bottom: 293px;
        }

        .image-preview.has-image {
            border-radius: 0;
        }

        .placeholder-text {
            text-align: center;
            line-height: 1.6;
        }

        .caption-section {
            margin-top: 20px;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }

        .screenshot-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }

        .screenshot-btn:hover {
            background: #218838;
        }

        .screenshot-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }

        #fake-screenshot-area {
            width: 1080px;
            height: 1350px;
        }

        .clear-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
            transition: background 0.3s;
        }

        .clear-btn:hover {
            background: #c82333;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        img {
            max-width: 100%;
            height: auto;
        }
        .bk-template {
            background-size: cover;
            background-position: center;
            padding-top: 106px;
            padding-left: 58px;
            padding-right: 63px;
        }

        .caption {
            font-size: 60px;
            font-weight: 700;
            line-height: 80px;
            text-align: center;
            color:#1941b9;
        }
        div#imagePreview {
            margin-bottom: 25px;
            border-radius: 20px 20px 20px 20px;
        }
        div#imagePreview.has-image {
            border: none;
        }
        .caption-wrapper {
            display: flex;
            align-items: center;
            height: 280px;
            margin-top:30px;
        }
        div#fake-screenshot-area {
            position: relative;
        }

        .date {
            position: absolute;
            top: 60px;
            left: 20px;
            font-size: 28px;
            font-weight: 400;
            padding: 0 30px;
            color: #201f1d;
            
        }
        .image-caption {
            width: 96%;
            position: absolute;
            bottom: 260px;
            left: 20px;
            font-size: 28px;
            font-weight: 400;
            padding: 0 30px;
            color: #201f1d;
            text-align: center;
        }
        
    </style>
</head>
<body>
<div class="container">
    <h1>‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶æ‡¶≤‡ßÅ ‡¶´‡¶ü‡ßã‡¶ï‡¶æ‡¶∞‡ßç‡¶°</h1>
    <p style="text-align: center;margin-bottom: 40px">‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶ï‡ßç‡¶Ø‡¶æ‡¶™‡¶∂‡¶®, ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶ö‡ßá‡¶û‡ßç‡¶ú ‡¶ï‡¶∞‡ßá ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶≤‡¶ø‡¶ñ‡¶¨‡ßá‡¶® "‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§"‡•§ </p>

    <div class="upload-section">
        <label class="file-input-wrapper">
            <input type="file" id="imageInput" accept="image/*">
            ‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° 
        </label>
        <button class="clear-btn" id="clearBtn" style="display: none;">‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>
    
    <div id="fake-screenshot-area" class="bk-template" style="background-image: url('/assets/pa-photocard.png')">
        <div contenteditable="true" id="today" class="date">‡¶∞‡¶æ‡¶ú‡¶®‡ßÄ‡¶§‡¶ø | ‡ßØ ‡¶ú‡ßÅ‡¶≤‡¶æ‡¶á ‡ß®‡ß¶‡ß®‡ß´</div>
        <div class="caption-wrapper">
            <p class="caption" contenteditable="true">‡¶ó‡¶®‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá‡¶∞ ‡¶Ö‡¶™‡¶∏‡¶æ‡¶Ç‡¶¨‡¶æ‡¶¶‡¶ø‡¶ï‡¶§‡¶æ‡¶∞ ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡¶¨‡¶ø‡¶¨‡ßÉ‡¶§‡¶ø ‡¶¶‡¶ø‡¶≤‡ßá‡¶® ‡¶è‡¶ï‡¶ù‡¶æ‡¶Å‡¶ï ‡¶π‡¶≤‡ßÅ‡¶¶ ‡¶∏‡¶æ‡¶Ç‡¶¨‡¶æ‡¶¶‡¶ø‡¶ï </p>
        </div>
        <div class="image-preview" id="imagePreview">
            <div class="placeholder-text">
                üì∑<br>
                ‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶®‡ßÄ‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶õ‡¶¨‡¶ø ‡¶è‡¶®‡ßá ‡¶õ‡ßá‡ßú‡ßá ‡¶¶‡¶ø‡¶®<br>
                <small>JPG, PNG, GIF, BMP, WebP ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡ßá‡¶∞ ‡¶õ‡¶¨‡¶ø‡¶ó‡ßÅ‡¶≤‡¶æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá</small>
            </div>
        </div>
        <div contenteditable="true" id="image-caption" class="image-caption">‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶™‡¶∂‡¶®</div>
        
    </div>



    <div class="caption-section">
        <div class="action-buttons">
            <button class="screenshot-btn" id="download-screenshot" disabled>‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
    </div>

    <p style="text-align: center;margin-top: 40px">‡¶è‡¶Ü‡¶á ‡¶¶‡¶ø‡ßü‡ßá ‡¶®‡¶ø‡¶∞‡ßç‡¶Æ‡¶ø‡¶§‡•§ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ï‡ßã‡¶® ‡¶¶‡ßã‡¶∑ ‡¶®‡¶æ‡¶á‡•§ </p>
</div>

<script>
    const imageInput = document.getElementById('imageInput');
    const imagePreview = document.getElementById('imagePreview');
    const clearBtn = document.getElementById('clearBtn');
    const downloadBtn = document.getElementById('download-screenshot');

    let currentImageUrl = null;

    function getBanglaDate() {
        const banglaDigits = ['‡ß¶','‡ßß','‡ß®','‡ß©','‡ß™','‡ß´','‡ß¨','‡ß≠','‡ßÆ','‡ßØ'];
        const banglaMonths = [
            "‡¶ú‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø", "‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø", "‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö", "‡¶è‡¶™‡ßç‡¶∞‡¶ø‡¶≤", "‡¶Æ‡ßá", "‡¶ú‡ßÅ‡¶®",
            "‡¶ú‡ßÅ‡¶≤‡¶æ‡¶á", "‡¶Ü‡¶ó‡¶∏‡ßç‡¶ü", "‡¶∏‡ßá‡¶™‡ßç‡¶ü‡ßá‡¶Æ‡ßç‡¶¨‡¶∞", "‡¶Ö‡¶ï‡ßç‡¶ü‡ßã‡¶¨‡¶∞", "‡¶®‡¶≠‡ßá‡¶Æ‡ßç‡¶¨‡¶∞", "‡¶°‡¶ø‡¶∏‡ßá‡¶Æ‡ßç‡¶¨‡¶∞"
        ];

        const now = new Date();

        const day = now.getDate().toString().split('').map(d => banglaDigits[d]).join('');
        const month = banglaMonths[now.getMonth()];
        const year = now.getFullYear().toString().split('').map(d => banglaDigits[d]).join('');

        return `${day} ${month} ${year}`;
    }

    // set date in #today
    document.getElementById('today').textContent = getBanglaDate();

    // Handle file selection
    imageInput.addEventListener('change', function(event) {
        const file = event.target.files[0];

        if (file) {
            // Validate file type
            if (!file.type.startsWith('image/')) {
                alert('Please select a valid image file!');
                return;
            }

            clearBtn.style.display = 'inline-block';

            // Create FileReader to read the file
            const reader = new FileReader();

            reader.onload = function(e) {
                // Set the image as background
                currentImageUrl = e.target.result;
                imagePreview.style.backgroundImage = `url("${currentImageUrl}")`;
                imagePreview.classList.add('has-image');
                imagePreview.innerHTML = ''; // Remove placeholder text

                // Enable screenshot button
                downloadBtn.disabled = false;
            };

            // Read the file as data URL
            reader.readAsDataURL(file);
        }
    });

    // Clear button functionality
    clearBtn.addEventListener('click', function() {
        imageInput.value = '';
        imagePreview.style.backgroundImage = '';
        imagePreview.classList.remove('has-image');
        imagePreview.innerHTML = `
                <div class="placeholder-text">
                    üì∑<br>
                    ‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶õ‡¶¨‡¶ø ‡¶è‡¶®‡ßá ‡¶õ‡ßá‡ßú‡ßá ‡¶¶‡¶ø‡¶®<br>
                    <small>JPG, PNG, GIF, BMP, WebP ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡ßá‡¶∞ ‡¶õ‡¶¨‡¶ø‡¶ó‡ßÅ‡¶≤‡¶æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá</small>
                </div>
            `;
        clearBtn.style.display = 'none';
        downloadBtn.disabled = true;
        currentImageUrl = null;
    });

    // Drag and drop functionality
    imagePreview.addEventListener('dragover', function(e) {
        e.preventDefault();
        imagePreview.style.borderColor = '#007bff';
        imagePreview.style.backgroundColor = '#f8f9fa';
    });

    imagePreview.addEventListener('dragleave', function(e) {
        e.preventDefault();
        imagePreview.style.borderColor = '#ddd';
        imagePreview.style.backgroundColor = 'transparent';
    });

    imagePreview.addEventListener('drop', function(e) {
        e.preventDefault();
        imagePreview.style.borderColor = '#ddd';
        imagePreview.style.backgroundColor = 'transparent';

        const files = e.dataTransfer.files;
        if (files.length > 0) {
            const file = files[0];
            if (file.type.startsWith('image/')) {
                imageInput.files = files;
                imageInput.dispatchEvent(new Event('change'));
            } else {
                alert('Please drop a valid image file!');
            }
        }
    });


    document.getElementById("download-screenshot").addEventListener("click", function () {
        const target = document.getElementById("fake-screenshot-area");

        html2canvas(target, { scale: 1 }).then(originalCanvas => {
            // Create a new canvas with desired output size
            const outputCanvas = document.createElement("canvas");
            const ctx = outputCanvas.getContext("2d");

            outputCanvas.width = 1000;
            outputCanvas.height = 1000;

            // Scale and draw the original canvas into the output canvas
            ctx.drawImage(originalCanvas, 0, 0, outputCanvas.width, outputCanvas.height);

            // Convert to image and trigger download
            const imgData = outputCanvas.toDataURL("image/png");
            const link = document.createElement("a");
            link.href = imgData;
            link.download = "screenshot-1200x630.png";
            link.click();
        });
    });
</script>
</body>
</html>
